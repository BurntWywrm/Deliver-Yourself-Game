[gd_scene load_steps=23 format=3 uid="uid://c5ddyd8m5gkh4"]

[ext_resource type="Script" uid="uid://lgvrsyljv7o4" path="res://[03] Prefabs/player/player_scripts/player/player.gd" id="1_mx1uw"]
[ext_resource type="Script" uid="uid://025cm3nchdyi" path="res://[03] Prefabs/player/player_scripts/shapeshifting/shapeshifiting_manager/shapeshifting_manager.gd" id="2_6tigd"]
[ext_resource type="Shape3D" uid="uid://bx80rp17g80dr" path="res://[03] Prefabs/player/player_assets/collisions/box/box_collision.tres" id="2_p6uu2"]
[ext_resource type="Script" uid="uid://cxgw1j2csxbj3" path="res://[03] Prefabs/player/player_scripts/shapeshifting/morph_state/box_morph_script.gd" id="3_alcr1"]
[ext_resource type="Script" uid="uid://cf044if58jqj0" path="res://[03] Prefabs/player/player_scripts/shapeshifting/morph_state/envelope_morph_script.gd" id="4_evv4n"]
[ext_resource type="Script" uid="uid://72ri1l3jltu4" path="res://[03] Prefabs/player/player_scripts/shapeshifting/morph_state/gift_morph_script.gd" id="4_scpqb"]
[ext_resource type="Script" uid="uid://brn5tpxkk83bw" path="res://[03] Prefabs/player/player_scripts/shapeshifting/morph_selection_component/morph_selection_component.gd" id="6_3w07h"]
[ext_resource type="ArrayMesh" uid="uid://cnpome5d7v2ke" path="res://[03] Prefabs/player/player_assets/morphs/box/box mesh/box_body.tres" id="7_8mq0u"]
[ext_resource type="Shape3D" uid="uid://b5mhsdsw23m72" path="res://[03] Prefabs/player/player_assets/collisions/envelope/envelope_collision.tres" id="8_3qcvm"]
[ext_resource type="ArrayMesh" uid="uid://bdfay1orkm2i2" path="res://[03] Prefabs/player/player_assets/morphs/box/box mesh/box_flap_1.tres" id="8_g0waa"]
[ext_resource type="Shape3D" uid="uid://f7hi4txnl64w" path="res://[03] Prefabs/player/player_assets/collisions/gift/gift_collision.tres" id="8_iubmf"]
[ext_resource type="ArrayMesh" uid="uid://d2p3uf58mfehp" path="res://[03] Prefabs/player/player_assets/morphs/box/box mesh/box_flap_2.tres" id="9_nlnxo"]
[ext_resource type="ArrayMesh" uid="uid://px8hux3cvw5n" path="res://[03] Prefabs/player/player_assets/morphs/box/box mesh/box_small_1.tres" id="10_vab0r"]
[ext_resource type="ArrayMesh" uid="uid://ckgwg2pg7tmsf" path="res://[03] Prefabs/player/player_assets/morphs/box/box mesh/box_small_2.tres" id="11_8lhsw"]
[ext_resource type="ArrayMesh" uid="uid://ddrwydl52qxik" path="res://[03] Prefabs/player/player_assets/morphs/gift/gift_mesh/gift_body.tres" id="12_vab0r"]
[ext_resource type="ArrayMesh" uid="uid://dyc2c6xrwsy8x" path="res://[03] Prefabs/player/player_assets/morphs/gift/gift_mesh/gift_lid.tres" id="13_8lhsw"]
[ext_resource type="ArrayMesh" uid="uid://cqoayq212jusd" path="res://[03] Prefabs/player/player_assets/morphs/envelope/envelope mesh/envelope.tres" id="14_8lhsw"]

[sub_resource type="Animation" id="Animation_p6uu2"]
resource_name = "box_enter"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("player_collision:shape")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_p6uu2")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Visuals/box:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Visuals/gift:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Visuals/envelope:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_3qcvm"]
resource_name = "gift_enter"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("player_collision:shape")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("8_iubmf")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Visuals/box:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Visuals/gift:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Visuals/envelope:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_iubmf"]
resource_name = "envelope_enter"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("player_collision:shape")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("8_3qcvm")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Visuals/box:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Visuals/gift:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Visuals/envelope:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_75flc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("player_collision:shape")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_p6uu2")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Visuals/box:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Visuals/gift:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Visuals/envelope:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_75flc"]
_data = {
&"RESET": SubResource("Animation_75flc"),
&"box_enter": SubResource("Animation_p6uu2"),
&"envelope_enter": SubResource("Animation_iubmf"),
&"gift_enter": SubResource("Animation_3qcvm")
}

[node name="player" type="RigidBody3D"]
script = ExtResource("1_mx1uw")

[node name="player_collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0144355, 0)
shape = ExtResource("2_p6uu2")

[node name="shapeshift_manager" type="Node" parent="." node_paths=PackedStringArray("starting_morph")]
script = ExtResource("2_6tigd")
starting_morph = NodePath("box")

[node name="box" type="Node" parent="shapeshift_manager"]
script = ExtResource("3_alcr1")

[node name="gift" type="Node" parent="shapeshift_manager"]
script = ExtResource("4_scpqb")

[node name="envelope" type="Node" parent="shapeshift_manager"]
script = ExtResource("4_evv4n")

[node name="morph_selection_component" type="Node" parent="." node_paths=PackedStringArray("envelope_morph", "gift_morph", "box_morph")]
script = ExtResource("6_3w07h")
envelope_morph = NodePath("../shapeshift_manager/envelope")
gift_morph = NodePath("../shapeshift_manager/gift")
box_morph = NodePath("../shapeshift_manager/box")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_75flc")
}

[node name="Visuals" type="Node3D" parent="."]

[node name="box" type="Node3D" parent="Visuals"]

[node name="box_body" type="MeshInstance3D" parent="Visuals/box"]
mesh = ExtResource("7_8mq0u")

[node name="box_flap_1" type="MeshInstance3D" parent="Visuals/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.163, -0.119)
mesh = ExtResource("8_g0waa")

[node name="box_flap_2" type="MeshInstance3D" parent="Visuals/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.16336, 0.118892)
mesh = ExtResource("9_nlnxo")

[node name="box_small_1" type="MeshInstance3D" parent="Visuals/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.23544, -0.160204, 0)
mesh = ExtResource("10_vab0r")

[node name="box_small_2" type="MeshInstance3D" parent="Visuals/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.23901, -0.16311, 0)
mesh = ExtResource("11_8lhsw")

[node name="gift" type="Node3D" parent="Visuals"]
visible = false

[node name="gift_body" type="MeshInstance3D" parent="Visuals/gift"]
mesh = ExtResource("12_vab0r")

[node name="gift_lid" type="MeshInstance3D" parent="Visuals/gift"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.202428, 0)
mesh = ExtResource("13_8lhsw")

[node name="envelope" type="Node3D" parent="Visuals"]
visible = false

[node name="envelope_body" type="MeshInstance3D" parent="Visuals/envelope"]
mesh = ExtResource("14_8lhsw")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2.21459)

[node name="Timers" type="Node" parent="."]

[node name="Poof_CD" type="Timer" parent="Timers"]
